{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nconst formState = 'feedback-form-state';\n\nconst formRef = document.querySelector('.feedback-form');\nconst fieldsRef = formRef.querySelectorAll('[name]');\n\nconst handleGetState = () =>{\n  const state = localStorage.getItem(formState);\n  return state ? JSON.parse(state) : {};\n}\n\nlet state = handleGetState();\n\nconst handleOnInput = (e) => {\n  const { name, value } = e.target;\n  state = { ...state, [name]: value };\n  handleSetState(state);\n}\n\nconst handleOnSubmit = (e)=> {\n  e.preventDefault();\n  console.log(state);\n  clearState();\n  formRef.reset();\n}\n\n\nconst handleSetState = (state) =>  {\n  localStorage.setItem(formState, JSON.stringify(state));\n}\n\nconst clearState = ()  => {\n  localStorage.removeItem(formState);\n  state = {};\n}\n\nconst handleFillFields = () => {\n  fieldsRef.forEach(field => {\n    field.value = state[field.name] || '';\n  });\n}\n\nhandleFillFields();\nformRef.addEventListener('input', throttle(handleOnInput, 500));\nformRef.addEventListener('submit', handleOnSubmit);"],"names":["formState","formRef","fieldsRef","handleGetState","state","handleOnInput","name","value","handleSetState","handleOnSubmit","clearState","handleFillFields","field","throttle"],"mappings":"wIACA,MAAMA,EAAY,sBAEZC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAYD,EAAQ,iBAAiB,QAAQ,EAE7CE,EAAiB,IAAK,CAC1B,MAAMC,EAAQ,aAAa,QAAQJ,CAAS,EAC5C,OAAOI,EAAQ,KAAK,MAAMA,CAAK,EAAI,CAAA,CACrC,EAEA,IAAIA,EAAQD,EAAc,EAE1B,MAAME,EAAiB,GAAM,CAC3B,KAAM,CAAE,KAAAC,EAAM,MAAAC,GAAU,EAAE,OAC1BH,EAAQ,CAAE,GAAGA,EAAO,CAACE,GAAOC,CAAK,EACjCC,EAAeJ,CAAK,CACtB,EAEMK,EAAkB,GAAK,CAC3B,EAAE,eAAc,EAChB,QAAQ,IAAIL,CAAK,EACjBM,IACAT,EAAQ,MAAK,CACf,EAGMO,EAAkBJ,GAAW,CACjC,aAAa,QAAQJ,EAAW,KAAK,UAAUI,CAAK,CAAC,CACvD,EAEMM,EAAa,IAAO,CACxB,aAAa,WAAWV,CAAS,EACjCI,EAAQ,CAAA,CACV,EAEMO,EAAmB,IAAM,CAC7BT,EAAU,QAAQU,GAAS,CACzBA,EAAM,MAAQR,EAAMQ,EAAM,OAAS,EACvC,CAAG,CACH,EAEAD,IACAV,EAAQ,iBAAiB,QAASY,EAASR,EAAe,GAAG,CAAC,EAC9DJ,EAAQ,iBAAiB,SAAUQ,CAAc"}